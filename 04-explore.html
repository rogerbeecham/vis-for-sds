<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-0.9.637">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<title>Visualization for Social Data Science - 4&nbsp; Exploratory Data Analysis</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>

<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./05-network.html" rel="next">
<link href="./03-visual.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet"><script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script><script src="site_libs/kePrint-0.0.1/kePrint.js"></script><link href="site_libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<script>window.backupDefine = window.define; window.define = undefined;</script><script src="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js"></script><script>document.addEventListener("DOMContentLoaded", function () {
 var mathElements = document.getElementsByClassName("math");
 var macros = [];
 for (var i = 0; i < mathElements.length; i++) {
  var texText = mathElements[i].firstChild;
  if (mathElements[i].tagName == "SPAN") {
   katex.render(texText.data, mathElements[i], {
    displayMode: mathElements[i].classList.contains('display'),
    throwOnError: false,
    macros: macros,
    fleqn: false
   });
}}});
  </script><script>window.define = window.backupDefine; window.backupDefine = undefined;</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css">
</head>
<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }"><div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Exploratory Data Analysis</span></h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto"><div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Visualization for Social Data Science</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/rogerbeecham/vis4gds/" title="Source Code" class="sidebar-tool px-1"><i class="bi bi-github"></i></a>
    <a href="https://twitter.com/intent/tweet?url=%7Curl%7C" title="Twitter" class="sidebar-tool px-1"><i class="bi bi-twitter"></i></a>
</div>
    </div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">Preface</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01-intro.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02-data.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Data Fundamentals</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03-visual.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Visualization Fundamentals</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04-explore.html" class="sidebar-item-text sidebar-link active"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Exploratory Data Analysis</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05-network.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Networks</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./06-model.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Models</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./07-uncertainty.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Uncertainty</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./08-storytelling.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Data Storytelling</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">References</a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
    <div class="sidebar-item-container"> 
        <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">Appendices</a>
      <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
        <i class="bi bi-chevron-right ms-2"></i>
      </a>
    </div>
    <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./a1-data.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">A</span>&nbsp; <span class="chapter-title">Data Fundamentals</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./a2-visual.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">B</span>&nbsp; <span class="chapter-title">Visualization Fundamentals</span></a>
  </div>
</li>
    </ul>
</li>
    </ul>
</div>
</nav><!-- margin-sidebar --><div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc"><h2 id="toc-title">Table of contents</h2>
   
  <ul>
<li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction"> <span class="header-section-number">4.1</span> Introduction</a></li>
  <li>
<a href="#concepts" id="toc-concepts" class="nav-link" data-scroll-target="#concepts"> <span class="header-section-number">4.2</span> Concepts</a>
  <ul class="collapse">
<li><a href="#exploratory-data-analysis-and-statistical-graphics" id="toc-exploratory-data-analysis-and-statistical-graphics" class="nav-link" data-scroll-target="#exploratory-data-analysis-and-statistical-graphics"> <span class="header-section-number">4.2.1</span> Exploratory data analysis and statistical graphics</a></li>
  <li><a href="#plots-for-continuous-variables" id="toc-plots-for-continuous-variables" class="nav-link" data-scroll-target="#plots-for-continuous-variables"> <span class="header-section-number">4.2.2</span> Plots for continuous variables</a></li>
  <li><a href="#plots-for-categorical-variables" id="toc-plots-for-categorical-variables" class="nav-link" data-scroll-target="#plots-for-categorical-variables"> <span class="header-section-number">4.2.3</span> Plots for categorical variables</a></li>
  </ul>
</li>
  <li><a href="#techniques" id="toc-techniques" class="nav-link" data-scroll-target="#techniques"> <span class="header-section-number">4.3</span> Techniques</a></li>
  </ul><div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/rogerbeecham/vis4gds/edit/master/04-explore.qmd" class="toc-action">Edit this page</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><div class="quarto-title">
<h1 class="title"><span id="sec-exploratory" class="quarto-section-identifier d-none d-lg-block"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Exploratory Data Analysis</span></span></h1>
</div>



<div class="quarto-title-meta">

    
    
  </div>
  

</header><div class="cell">

</div>
<p>By the end of this chapter you should gain the following knowledge and practical skills.</p>
<div class="callout-note callout callout-style-default no-icon callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Knowledge outcomes
</div>
</div>
<div class="callout-body-container callout-body">
<ul class="task-list">
<li>
<input type="checkbox" disabled="" checked="">
An appreciation of the exploratory data analysis (EDA) workflow.</li>
<li>
<input type="checkbox" disabled="" checked="">
The main chart types [or <em>idioms</em> <span class="citation" data-cites="munzner_visualization_2014">(<a href="references.html#ref-munzner_visualization_2014" role="doc-biblioref">Munzner 2014</a>)</span> for summarising variation within- and between- variables.</li>
<li>
<input type="checkbox" disabled="" checked="">
The three strategies that can be used for supporting <em>comparison</em> in EDA: juxtaposition, superposition and direct encoding <span class="citation" data-cites="gleicher_visual_2011">(<a href="references.html#ref-gleicher_visual_2011" role="doc-biblioref">Gleicher and Roberts 2011</a>)</span>
</li>
</ul>
</div>
</div>
<div class="callout-note callout callout-style-default no-icon callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Skills outcomes
</div>
</div>
<div class="callout-body-container callout-body">
<ul class="task-list">
<li>
<input type="checkbox" disabled="" checked="">
Write <code>ggplot2</code> specifications that use colour and layout to support comparison.</li>
</ul>
</div>
</div>
<section id="introduction" class="level2" data-number="4.1"><h2 data-number="4.1" class="anchored" data-anchor-id="introduction">
<span class="header-section-number">4.1</span> Introduction</h2>
<p>Exploratory Data Analysis (EDA) is an approach to analysis which aims to expose the properties and structure of a dataset, and from here suggest directions for analytic inquiry. In an EDA, relationships are quickly inferred, anomalies labelled, assumptions tested and new hypotheses and ideas are formulated. EDA relies heavily on visual approaches to analysis – it is common to generate many dozens of (often throwaway) data graphics.</p>
<p>This session will demonstrate how the concepts and principles introduced previously, of data types and their visual encoding, can be applied to support EDA. It will do so by analysing <a href="https://data.gov.uk/dataset/cb7ae6f0-4be6-4935-9277-47e5ce24a11f/road-safety-data">STATS19</a>, a dataset containing detailed information on every reported road traffic crash in Great Britain that resulted in personal injury. STATS19 is highly detailed, with many categorical variables. This session will start by revisiting commonly used chart idioms <span class="citation" data-cites="munzner_visualization_2014">(<a href="references.html#ref-munzner_visualization_2014" role="doc-biblioref">Munzner 2014</a>)</span> for summarising within-variable variation and between-variable co-variation in a dataset. It will then focus more directly on the STATS19 case, and how detailed <em>comparison</em> across many categorical variables can be effected using colour, layout and statistical computation.</p>
</section><section id="concepts" class="level2" data-number="4.2"><h2 data-number="4.2" class="anchored" data-anchor-id="concepts">
<span class="header-section-number">4.2</span> Concepts</h2>
<section id="exploratory-data-analysis-and-statistical-graphics" class="level3" data-number="4.2.1"><h3 data-number="4.2.1" class="anchored" data-anchor-id="exploratory-data-analysis-and-statistical-graphics">
<span class="header-section-number">4.2.1</span> Exploratory data analysis and statistical graphics</h3>
<blockquote class="blockquote">
<p>The simple graph has brought more information to the data analyst’s mind than any other device.</p>
<p>John Tukey</p>
</blockquote>
<p>In an Exploratory Data Analysis (EDA), graphical and statistical summaries are variously used to build knowledge and understanding of a dataset. The goal of EDA is to infer relationships, identify anomalies and test new ideas and hypotheses: it is a knowlegde-building activity. Rather than a formal set of techniques, EDA should be considered an <em>approach</em> to analysis. It aims to reveal the underlying properties of variables in a dataset (central tendency and dispersion) and their structure (how variables relate to one another) and from there formulate hypotheses to be investigated.</p>
<p><span class="citation" data-cites="wickham_r_2017">Wickham and Grolemund (<a href="references.html#ref-wickham_r_2017" role="doc-biblioref">2017</a>)</span> identify two main questions that an EDA should address:</p>
<ol type="1">
<li>What type of <em>variation</em> occurs <em>within</em> variables of a dataset?</li>
<li>What type of <em>covariation</em> occurs <em>between</em> variables of a dataset?</li>
</ol>
<div class="cell">
<div class="cell-output-display">
<div id="tbl-variable-types" class="anchored">

<table class=" lightable-minimal" style="font-family: &quot;Trebuchet MS&quot;, verdana, sans-serif; margin-left: auto; margin-right: auto;">
<caption>Table 4.1:  Breakdown of variable types. </caption>
 <thead><tr>
<th style="text-align:left;"> Measurement </th>
   <th style="text-align:left;"> Statistics </th>
   <th style="text-align:left;"> Chart idiom </th>
  </tr></thead>
<tbody>
<tr grouplength="3"><td colspan="3" style="border-bottom: 0px solid;">Within-variable variation</td></tr>
<tr>
<td style="text-align:left;padding-left: 2em;width: 8em; font-family:  Monospace" indentlevel="1"> Nominal </td>
   <td style="text-align:left;"> mode | entropy </td>
   <td style="text-align:left;"> bar charts, dot plots ... </td>
  </tr>
<tr>
<td style="text-align:left;padding-left: 2em;width: 8em; font-family:  Monospace" indentlevel="1"> Ordinal </td>
   <td style="text-align:left;"> median | percentile </td>
   <td style="text-align:left;"> bar charts, dot plots ... </td>
  </tr>
<tr>
<td style="text-align:left;padding-left: 2em;width: 8em; font-family:  Monospace" indentlevel="1"> Continuous </td>
   <td style="text-align:left;"> mean | variance </td>
   <td style="text-align:left;"> histograms, box plots, density plots ... </td>
  </tr>
<tr grouplength="3"><td colspan="3" style="border-bottom: 0px solid;">Between-variable variation</td></tr>
<tr>
<td style="text-align:left;padding-left: 2em;width: 8em; font-family:  Monospace" indentlevel="1"> Nominal </td>
   <td style="text-align:left;"> contingency tables </td>
   <td style="text-align:left;"> mosaic/spine plots ... </td>
  </tr>
<tr>
<td style="text-align:left;padding-left: 2em;width: 8em; font-family:  Monospace" indentlevel="1"> Ordinal </td>
   <td style="text-align:left;"> rank correlation </td>
   <td style="text-align:left;"> slope/bump charts ... </td>
  </tr>
<tr>
<td style="text-align:left;padding-left: 2em;width: 8em; font-family:  Monospace" indentlevel="1"> Continuous </td>
   <td style="text-align:left;"> correlation </td>
   <td style="text-align:left;"> scatterplots, parallel coordinate plots ... </td>
  </tr>
</tbody>
</table>
</div>
</div>
</div>
<p>You will recall from early statistics classes, usually under the theme <em>descriptive statistics</em>, that when summarising within-variable variation, we are interested in a variable’s spread or dispersion and its location within this distribution (central tendency). Different statistics can be applied, but a familiar distinction is between measures of central tendency that are or are not robust to outliers (e.g.&nbsp;mode and median versus mean). Correlation statistics are most obviously applied when studying between-variable covariation, but other statistics, such as odds ratios and chi-square tests are commonly used when studying covariation in <a href="https://en.wikipedia.org/wiki/Contingency_table">contingency tables</a>.</p>
<p>Decisions around which statistic to use depend on a variable’s measurement-level (e.g. <a href="#tbl-variable-types">Table&nbsp;<span>4.1</span></a>). As demonstrated by <a href="https://en.wikipedia.org/wiki/Anscombe%27s_quartet">Anscombe’s quartet</a>, statistical summaries can hide important structure, or assume structure that doesn’t exist. None of the measures of central tendency in <a href="#tbl-variable-types">Table&nbsp;<span>4.1</span></a> would expose whether a variable for instance is multi-modal and only when studying all measures of central tendency and dispersion together might it be possible to guess at the presence of outliers that could undermine statistical assumptions. It is for this reason that <em>data visualization</em> is seen as intrinsic to EDA <span class="citation" data-cites="tukey_exploratory_1977">(<a href="references.html#ref-tukey_exploratory_1977" role="doc-biblioref">Tukey 1977</a>)</span>.</p>
</section><section id="plots-for-continuous-variables" class="level3" data-number="4.2.2"><h3 data-number="4.2.2" class="anchored" data-anchor-id="plots-for-continuous-variables">
<span class="header-section-number">4.2.2</span> Plots for continuous variables</h3>
<section id="within-variable-variation-histograms-density-plots-boxplots" class="level4" data-number="4.2.2.1"><h4 data-number="4.2.2.1" class="anchored" data-anchor-id="within-variable-variation-histograms-density-plots-boxplots">
<span class="header-section-number">4.2.2.1</span> Within-variable variation: histograms, density plots, boxplots</h4>
<div class="cell" data-tbl-cap="Univariate plots of dispersion.">
<div class="cell-output-display">
<div id="fig-univariate-continuous" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><p><img src="../../../figs/univariate-plots.png" class="img-fluid figure-img"></p>
<p></p><figcaption aria-hidden="true" class="figure-caption">Figure 4.1: <strong>?(caption)</strong></figcaption><p></p>
</figure>
</div>
</div>
</div>
<p>Figure <a href="#fig-univariate-continuous">Figure&nbsp;<span>4.1</span></a> presents statistical graphics that are commonly used to display the distribution of continuous variables measured on a <code>ratio</code> or <code>interval</code> scale – in this instance the age of casualty for a random sample of Stast19 road crashes (<code>casualty_age</code>).</p>
<p>In the bottom row is a <em>strip-plot</em>. Every observation is displayed as a dot and mapped to <code>x-position</code>, with transparency and a random vertical perturbation applied to resolve occlusion due to overlapping observations. Although strip-plots scale poorly, the advantage is that all observations are displayed without the need to impose an aggregation. It is possible to visually identify the <em>location</em> of the distribution – denser dots towards 20-25 age range – but also that there is quite a degree of spread across the age values.</p>
<p><em>Histograms</em> were used in the previous chapter when analysing the 2019 UK General Election dataset. Histograms partition continuous variables into equal-range bins and observations in each bin are counted. These counts are encoded on an aligned scale using bar height. Increasing the size of the bins increases the resolution of the graphical summary. If reasonable decisions are made around choice of bin, histograms give distributions a “shape” that is expressive. It is easy to identify the <em>location</em> of a distribution and, in using length on aligned scale to encode frequency, estimate relative densities between different parts of the distribution. Different from the strip-plot, the histogram allows us to intuit that despite the heavy spread, the distribution of <code>casualty_age</code> is right-skewed, and we’d expect this given the location of the mean (36 years) relative to the median (33 years).</p>
<p>A problem with histograms is the potential for discontinuities and artificial edge-effects around the bins. <em>Density plots</em> overcome this and can be thought of as smoothed histograms. They use <a href="https://en.wikipedia.org/wiki/Kernel_density_estimation">kernel density estimation</a> (KDE) to show the <a href="https://en.wikipedia.org/wiki/Probability_density_function">probability density function</a> of a variable – the relative amount of probability attached to each value of <code>casualty_age</code>. As with histograms, there are decisions to be made around how data are partitioned into bins (or KDE bandwidths). From glancing at the density plots an overall “shape” to the distribution can be immediately derived. It is also possible to infer statistical properties: the mode of the distribution (the highest density), the mean (by visual averaging) and median (finding the midpoint of the area under the curve). Density plots are better suited to datasets that contain a reasonably large number of observations and due to the smoothing function it is possible to generate a density plot that suggests nonsensical values (e.g.&nbsp;negative ages in this case if I hadn’t censored the plot range).</p>
<p>Finally, <em>boxplots</em>, or <em>box and whisker</em> plots <span class="citation" data-cites="mcgill_variations_1978">(<a href="references.html#ref-mcgill_variations_1978" role="doc-biblioref">McGill and Larsen 1978</a>)</span>, encode the statistical properties that we infer from strip-plots, histograms and density plots directly. The box is the interquartile range (<span class="math inline">IQR</span>) of the <code>casualty_age</code> variable, the vertical line splitting the box is the median, and the whiskers are placed at observations <span class="math inline">\leq 1.5*IQR</span>. Whilst we lose information around the shape of a distribution, box-plots are space-efficient and useful for comparing many distributions at once.</p>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>This discussion was a little prosaic – we haven’t made too many observations to advance our knowledge of the dataset. I was surprised at the low average age of road casualties and so quickly explored the distribution of <code>casualty_age</code> conditioning on another variable and differentiating between variable values using colour. <a href="#fig-boxplots-class">Figure&nbsp;<span>4.2</span></a> displays boxplots of the location and spread in <code>casualty_age</code> by vehicle type (left) and also by <code>casualty_class</code> for all crashes involving pedestrians. A noteworthy pattern is that riders of bicycles and motorcycles tend to be younger than the pedestrians they are contacting with, whereas for buses, taxis, HGVs and cars the reverse is true. Pedestrians involved in crashes with cars are especially skewed towards the younger ages.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-boxplots-class" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><p><img src="../../../figs/boxplot-by-class.png" class="img-fluid figure-img"></p>
<p></p><figcaption aria-hidden="true" class="figure-caption">Figure 4.2: Boxplots of casualty age by vehicle type and class.</figcaption><p></p>
</figure>
</div>
</div>
</div>
</div>
</div>
<p>The previous session included several <em>scatterplots</em> for displaying association between two quantitative variables. Scatterplots are used to check whether the association between variables is linear, as in <a href="https://en.wikipedia.org/wiki/Anscombe%27s_quartet">Anscombe’s quartet</a>, but also to make inferences about the direction and intensity of linear correlation between variables – the extent to which <em>values</em> in one variable depend on the values of another – and also around the nature of variation between variables – the extent to which <em>variation</em> in one variable depends on another (<a href="https://en.wikipedia.org/wiki/Heteroscedasticity">heteroscedasticity</a>). Although other <em>chart idioms</em> <span class="citation" data-cites="munzner_visualization_2014">(<a href="references.html#ref-munzner_visualization_2014" role="doc-biblioref">Munzner 2014</a>)</span> for displaying bivariate data exist, empirical studies in Information Visualization have demonstrated that aggregate correlation statistics can be reliably estimated from scatterplots <span class="citation" data-cites="rensink_perception_2010 harrison_ranking_2014 kay_beyond_2016 correll_regression_2017">(<a href="references.html#ref-rensink_perception_2010" role="doc-biblioref">Rensink and Baldridge 2010</a>; <a href="references.html#ref-harrison_ranking_2014" role="doc-biblioref">Harrison et al. 2014</a>; <a href="references.html#ref-kay_beyond_2016" role="doc-biblioref">Kay and Heer 2016</a>; <a href="references.html#ref-correll_regression_2017" role="doc-biblioref">Correll and Heer 2017</a>)</span>.</p>
<p>There are few variables in the STATS19 dataset measured on a continuous scale, but based on the analysis above, we may wish to explore more directly whether an association exists between the age of pedestrians and drivers for pedestrian-vehicle crashes. The scatterplots in <span class="quarto-unresolved-ref">?fig-scatters-type</span> show that no obvious linear association exists.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-scatters-age-class" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><p><img src="../../../figs/scatter-by-type.png" class="img-fluid figure-img"></p>
<p></p><figcaption aria-hidden="true" class="figure-caption">Figure 4.3: Scatterplots of pedestrian age by driver age and grouped by vehicle type.</figcaption><p></p>
</figure>
</div>
</div>
</div>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>It is common in an EDA to quickly compare associations between many quantitive variables in a dataset using <a href="https://en.wikipedia.org/wiki/Scatter_plot#Scatter_plot_matrices">scatterplot matrices</a> or alternatively <a href="https://en.wikipedia.org/wiki/Parallel_coordinates">parallel coordinate plots</a>. We will use both in sessions 6 and 7 when building models that attempt to formally structure and explain <strong>between-variable</strong> covariation.</p>
</div>
</div>
</section></section><section id="plots-for-categorical-variables" class="level3" data-number="4.2.3"><h3 data-number="4.2.3" class="anchored" data-anchor-id="plots-for-categorical-variables">
<span class="header-section-number">4.2.3</span> Plots for categorical variables</h3>
<section id="within-variable-variation-bars-dotplots-heatmaps" class="level4" data-number="4.2.3.1"><h4 data-number="4.2.3.1" class="anchored" data-anchor-id="within-variable-variation-bars-dotplots-heatmaps">
<span class="header-section-number">4.2.3.1</span> Within-variable variation: bars, dotplots, heatmaps</h4>
<p>With categorical variables we are interested in exploring how relative frequencies distribute across the variable’s categories. Bar charts are most commonly used. As established in the previous session, length is an efficient visual channel for encoding quantities, counts in this case. Often it is useful to flip bar charts on their side so that category labels are arranged horizontally for ease of reading and, unless there is a natural ordering to categories, arrange the bars in descending order based on their frequency, as in <a href="#fig-bars">Figure&nbsp;<span>4.4</span></a>.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-bars" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><p><img src="../../../figs/bars.png" class="img-fluid figure-img"></p>
<p></p><figcaption aria-hidden="true" class="figure-caption">Figure 4.4: Bars displaying crash frequencies by vehicle type.</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p>Bar charts are effective at conveying frequencies where the number of categories is reasonably small. For summarising frequencies across many categories, alternatives chart types that minimise non-data-ink, such as <a href="https://en.wikipedia.org/wiki/Dot_plot_(statistics)">Cleveland dot plots</a> and heatmaps may be appropriate. The left plot in <span class="quarto-unresolved-ref">?fig-dots-heatmap</span> displays crash counts for boroughs in London, ordered by crash frequency and grouped by whether boroughs are in inner- or outer- London. To the right is a heatmap with the same ordering and grouping of boroughs applied to the rows and with columns coloured according to crash frequencies by time period and further grouped by day of week. From scanning the graphic we can make several observations: that reported crashes tend to occur in the midday or evening peak (the middle two columns of a day are typically darker); that in relative terms there are more crashes recorded in outer London boroughs than inner London boroughs during the middle of the day on weekends (salient dark strips corresponding with midday Saturday and Sunday).</p>
</section></section></section><section id="techniques" class="level2" data-number="4.3"><h2 data-number="4.3" class="anchored" data-anchor-id="techniques">
<span class="header-section-number">4.3</span> Techniques</h2>


</section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      let href = ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script><nav class="page-navigation"><div class="nav-page nav-page-previous">
      <a href="./03-visual.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Visualization Fundamentals</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./05-network.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Networks</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>